<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="robots" content="nofollow,noindex">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>Prototipo 3 | Diseñando resiliencia</title>
    <style>

        @import url('https://fonts.googleapis.com/css?family=Roboto:100,300,400,500');


        body{
            font-family: 'Roboto', sans-serif;
            font-weight: 300;
            color:white;
            background:#222;
        }


        a{color:rgba(0, 0, 0, 1);}

        a:hover{color:rgba(0, 0, 0,1);}

        main{    
            background:#fbc02d;
            color:#000;

        }

        .bigger p{
            font-size:125%;
        }

        .bigger p.lead{
            font-size:175%;
            font-weight: 100;
        }

        p select{
            border:none;
            background:#fdd835;
            font-weight: 300;
        }
        

        aside{overflow: hidden;}

        #desplegar div {
            display: none;
        }

        .menu-toggle {
          border:none;
          position: absolute;
          left: 0;
          top: 0;
          width: 30px;
          height: 60px;
          text-align: center;
          line-height: 60px;
          z-index: 999999;
          border-radius: 0 0;
        }

        .btn-warning{
            border:none;

        }

        .menu-toggle[aria-expanded="false"]:before {
          content:"↓";
        }

        .menu-toggle[aria-expanded="true"]:before {
          content:"↑";
        }
    </style>
</head>

<body>


    <main>
    <div class="container pt-5">
        <div class="row mx-1">
            
            <div class="col-12 my-1 bigger">
              <p class="lead"><a href="https://opinion.cooperativa.cl/opinion/emergencias/reducir-los-desastres-es-aprender-de-nuestro-pasado-y-de-nuestro-entorno/2019-04-23/064412.html" target="_blank">Habitamos en territorios de gran fragilidad geológica e hidrológica</a>. Una limitada comprensión de las vulnerabilidades sociales de quienes habitamos en estos territorios nos expone, una y otra vez, a enfrentar situaciones de emergencia o desastre.</p>
              <p>Diseñar <a href="https://www.unisdr.org/we/inform/terminology#letter-r" target="_blank">resilencia</a> es reconocer y ampliar la comprensión de tales vulnerabilidades, para aportar a que las personas puedan resistir, absorber, adaptarse y/o recuperarse de cada situación previsible de emergencia o desastre.</p>
              <p>En este portafolio es posible encontrar proyectos que han sido diseñados para <select id="first">
                    <option selected>…</option>
                    <option value="f" data-second='{ "names" : [{"name":"…"},{"name":"mitigación", "value":"4"}]}'>agricultores</option>
                    <option value="a" data-second='{ "names" : [{"name":"…"},{"name":"emergencia", "value":"2"}]}'>brigadistas</option>
                    <option value="b" data-second='{ "names" : [{"name":"…"},{"name":"preparación", "value":"1"}]}'>consumidores</option>
                    <option value="d" data-second='{ "names" : [{"name":"…"},{"name":"preparación", "value":"1"},{"name":"emergencia", "value":"2"}]}'>familias</option>
                    <option value="i" data-second='{ "names" : [{"name":"…"},{"name":"emergencia", "value":"2"}]}'>profesionales de la salud</option>
                    <option value="e" data-second='{ "names" : [{"name":"…"},{"name":"emergencia", "value":"2"}]}'>reclusos</option>
                    <option value="c" data-second='{ "names" : [{"name":"…"},{"name":"preparación", "value":"1"},{"name":"emergencia", "value":"2"}]}'>turistas</option>
                    <option value="g" data-second='{ "names" : [{"name":"…"},{"name":"preparación", "value":"1"},{"name":"emergencia", "value":"2"}]}'>vecinos</option></select>, en contextos de <select id="second"></select>,  por estudiantes y académicos de la <a href="http://diseno.uc.cl/" target="_blank">Escuela de Diseño de la Pontificia Universidad Católica de Chile</a>, quienes han contado con la guía y el apoyo del <a href="https://www.cigiden.cl/" target="_blank">Centro Nacional de Investigación para la Gestión Integral del Riesgo de Desastres, CIGIDEN.</a></p>
            </div>

            <div class="col-12 mb-3 mt-5">
                <div id="desplegar" class="row"><!--gracias JS--></div>
                <div id="modalidad"><!--gracias JS--></div>
            </div>

        </div>
    </div>

    </main>

<aside id="play"></aside>

<footer class="mt-3">
  <div class="container py-3 small">

  <div class="row">
      
    <div class="col-sm-7 text-center text-sm-left"><p class="mt-5 ml-sm-2">DESIGNING RESILIENCE @ CHILE</p></div>
    <div class="col-sm-5 text-center text-sm-right">
        <div class="row">
            <div class="col"><a href="http://diseno.uc.cl/" target="_blank"><img src="../img/escuela.png" class="img-fluid mx-3 mb-2"></a></div>
            <div class="col"><a href="http://cigiden.cl/" target="_blank"><img src="../img/cigiden.png" class="img-fluid mx-3 mb-2"></a></div>
        </div>   
    </div>
  </div>

    </div>
</footer>





<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.6.3/papaparse.min.js"></script>

<script>
        
        $(document).ready(function() {


        // CON LA SIGUIENTE FUNCIÓN CREO CADA "TARJETA DE PROYECTO"

        Papa.parse("https://raw.githubusercontent.com/facoasecas/resilience/gh-pages/datos.csv", {
            download: true,
            header: true,
            complete: function(data) {
                console.log(data);
                data.data.forEach(function(d, i) {
                    $("#desplegar").append('<div class="col-12 col-sm-6 col-md-4 col-lg-3 ' + d.category + '"><h5><a href="#" data-toggle="modal" data-target="#modal' + i + '">' + d.title + '</a></h5><p>' + d.context + ' de ' + d.author + '</p><p><small>' + d.excerpt + '</small><hr class="mt-4 mb-5"></p></div>');
                
                    $("#modalidad").append('<div class="modal fade" id="modal' + i + '" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"><div class="modal-dialog modal-lg" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="exampleModalLabel">' + d.title + '</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body p-5"><img src="../' + d.pic + '" class="img-fluid"><br/>' + d.content + '</div></div></div></div>');
                });

            }
        });

        // LA SIGUIENTE FUNCIÓN LLENA LAS OPCIONES QUE CORRESPONDE EN LOS 2 SELECT


            $("#first").change(function() {
                $("#second option").remove();

                var names = $("#first option:selected").data('second').names;
                var newoptions = "";
                for (var i = 0; i < names.length; i++) {
                    newoptions += "<option value=" + names[i].value + ">" + names[i].name + "</option>";
                }
                $("#second").append(newoptions);
            });

            // LA SIGUIENTE FUNCIÓN HACE APARECER EL BOTÓN UNA VEZ SE SELECCIONE LA SEGUNDA OPCIÓN, NO ANTES. 

            $("#second").change(function() {

                $("#constructo p").remove();

                var usuarioSeleccionado = document.getElementById("first").value;

                var contextoSeleccionado = document.getElementById("second").value;

                $("#constructo").append('<p>designing resilience | portfolio | showing <strong>'+usuarioSeleccionado + contextoSeleccionado+'</strong></p>')

                $("#desplegar div").hide();

                $('.' + (usuarioSeleccionado + contextoSeleccionado)).show(100);
            });

            // LA SIGUIENTE FUNCIÓN MUESTRA LAS TARJETAS QUE CORRESPONDE A LA OPCIÓN, DESPUÉS DEL CLIC DEL BOTÓN



        });

</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/p5.min.js"></script>

<script>
let noiseScale=0.02;

function setup(){
    createCanvas(windowWidth,50).parent("play");
    background("#fbc02d");
    stroke("#222222");
    strokeWeight(2)
    for (let x=0; x < width; x++) {
        let noiseVal = noise((mouseX+x)*noiseScale, mouseY*noiseScale);
        line(x, noiseVal*40, x, height);
    }
}

</script>

</body>

</html>